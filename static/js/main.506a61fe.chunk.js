(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{125:function(e,a,t){e.exports=t(190)},139:function(e,a,t){},140:function(e,a,t){},141:function(e,a,t){},142:function(e,a,t){},143:function(e,a,t){},144:function(e,a,t){},147:function(e,a,t){},148:function(e,a,t){},175:function(e,a,t){},176:function(e,a,t){},177:function(e,a,t){},178:function(e,a,t){},179:function(e,a,t){},188:function(e,a,t){},189:function(e,a,t){},190:function(e,a,t){"use strict";t.r(a);var n=t(2),r=t.n(n),i=t(26),l=t.n(i),o=t(47),c=t(25),s=t(110),d=t(42),u=t(111),m=t.n(u),p=t(82),f=t(112),h=t.n(f),v=t(15),E={currentUser:null,deliveryAddresses:[]},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_CURRENT_USER":return Object(v.a)({},e,{currentUser:a.payload});case"DELIVERY_ADDRESSES":return Object(v.a)({},e,{deliveryAddresses:a.payload});default:return e}},b=void 0,C={comenzi:[],comanda:{id:null,clientClient:"",valoareCatalog:0,discount:0,valoareComanda:0,valoareClientFinal:0,observatii:"",adresaLivrare:"",stadiu:"NETRANSMISA",idFirma:{id:null},dataComanda:"",tipProdus:"",comandarepers:{id:null,idComanda:null,nrCrt:1,tipSubprodus:0,lungime:0,lungimeFinala:0,inaltime:0,inaltimeFinala:0,deschidere:"",culoareLamela:0,culoareCaseta:0,material:0,codMaterial:"",lungimeSnur:null,actionare:null,tipActionare:0,actionareStDr:null,ax:null,culoareComponente:null,optional1:0,optional2:0,optional3:0,console:0,buc:1,mp:0,pretCatalog:0,pretCuDiscount:0,pretClientFinal:0,observatii:"",tipProdus:"",denumireProdus:"",denumireSubProdus:"",denumireCuloareLamela:"",denumireCuloareCaseta:"",denumireMaterial:"",denumireTipActionare:"",denumireOptional1:"",denumireOptional2:"",denumireOptional3:""}},repere:[],reper:{nrCrt:1,tipSubprodus:0,lungime:0,lungimeFinala:0,inaltime:0,inaltimeFinala:0,deschidere:"",culoareLamela:0,culoareCaseta:0,material:0,codMaterial:"",lungimeSnur:0,actionare:"",tipActionare:0,actionareStDr:"",ax:"",culoareComponente:"",optional1:0,optional2:0,optional3:0,console:0,buc:1,mp:0,pretCatalog:0,pretCuDiscount:0,pretClientFinal:0,observatii:0,tipProdus:"",denumireProdus:"",denumireSubProdus:"",denumireCuloareLamela:"",denumireCuloareCaseta:"",denumireMaterial:"",denumireTipActionare:"",denumireOptional1:"",denumireOptional2:"",denumireOptional3:"",fotografii:[]},materiale:[],pretConsole:0,openEditComanda:{open:!1,title:"",add:!0},openRepere:!1,openEditReper:{open:!1,title:"",add:!0}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOAD_COMENZI":return Object(v.a)({},e,{comenzi:a.payload});case"LOAD_MATERIALE":return Object(v.a)({},e,{materiale:a.payload});case"LOAD_PRETCONSOLE":return Object(v.a)({},e,{pretConsole:a.payload});case"SET_COMANDA":return Object(v.a)({},e,{comanda:a.payload});case"SET_REPER":return Object(v.a)({},e,{reper:a.payload});case"SET_OPEN_EDIT_COMANDA":return Object(v.a)({},e,{openEditComanda:a.payload});case"SET_OPEN_EDIT_REPER":return Object(v.a)({},e,{openEditReper:a.payload});case"SET_OPEN_REPERE":return Object(v.a)({},e,{openRepere:a.payload});case"ADAUGA_COMANDA":return Object(v.a)({},e,{comenzi:b.state.comenzi.unshift(a.payload)});case"ADAUGA_REPER":return Object(v.a)({},e,{repere:b.state.repere.unshift(a.payload)});case"RESETARE_COMANDA":return Object(v.a)({},e,{comanda:C.comanda});case"RESETARE_REPER":return Object(v.a)({},e,{reper:C.reper});default:return e}},N={key:"root",storage:h.a,whitelist:["user"]},x=Object(d.c)({user:g,comanda:O}),S=Object(p.a)(N,x),w=[m.a],y=Object(d.d)(S,d.a.apply(void 0,w)),j=Object(p.b)(y),R=t(199),A=t(62),P=t(58),M=t(75),T=localStorage.getItem("jwt"),k=Object(A.b)({uri:"http://5.189.183.44:1338/graphql",headers:{authorization:"Bearer ".concat(T)}}),$=new P.a,I=new M.a({link:k,cache:$}),L=(t(138),t(139),t(27)),D=t(28),F=t(30),U=t(29),_=t(31),z=(t(140),t(53)),V=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jwt";localStorage&&localStorage.setItem(a,e.jwt)},J=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"adreselivrare";localStorage&&localStorage.setItem(a,JSON.stringify(e))},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"jwt",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"adreselivrare";return localStorage&&(localStorage.removeItem(e),localStorage.removeItem(a),localStorage.removeItem(t)),null},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"user";return localStorage&&localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):null},H=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";localStorage&&localStorage.setItem(a,JSON.stringify(e))};function B(e){var a=[];return function(e){var a=[];return e.length>0&&e.map(function(e){return a.push({adresa:e})}),a.length>0?a:[{adresa:""}]}(e).map(function(e){return a.push({adresa:"".concat(e.adresa.numeLocatie,", ").concat(e.adresa.oras,", ").concat(e.adresa.adresa,", cod postal ").concat(e.adresa.codPostal,"")})}),a}var Z=t(118),K=Object(n.createContext)({hidden:!0,toggleHidden:function(){}});t(141),t(142);function Q(){return(Q=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function Y(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var W=r.a.createElement("metadata",null," Svg Vector Icons : http://www.onlinewebfonts.com/icon "),X=r.a.createElement("g",null,r.a.createElement("path",{d:"M989.5,161c-2.9-30.4-30.5-56.3-61.4-56.3H72c-32.4,0-61.2,28.6-61.7,60.9c-0.5,2-0.5,4.1,0,6.2v662c0,32.6,29,61.7,61.7,61.7h856c32.6,0,61.7-29,61.7-61.7V168.1C990.1,165.6,990.1,163.2,989.5,161z M72,140.9h856c11.8,0,21.2,7.1,24.3,17.7L500,525.4L47.1,161.5C49.1,149.5,59.1,140.9,72,140.9z M928,859.1H72c-14.5,0-25.4-10.9-25.4-25.4V207.6L500,568.9l453.4-364.8v629.5C953.4,848.2,942.5,859.1,928,859.1z"})),ee=function(e){var a=e.svgRef,t=Y(e,["svgRef"]);return r.a.createElement("svg",Q({x:"0px",y:"0px",viewBox:"0 0 1000 1000",enableBackground:"new 0 0 1000 1000",xmlSpace:"preserve",ref:a},t),W,X)},ae=r.a.forwardRef(function(e,a){return r.a.createElement(ee,Q({svgRef:a},e))}),te=(t.p,function(){var e=Object(n.useContext)(K).toggleHidden;return r.a.createElement("div",{className:"cart-icon",onClick:e},r.a.createElement(ae,{className:"shopping-icon"}),r.a.createElement("span",{className:"item-count"},"0"))}),ne=(t(143),t(66)),re=(t(144),function(e){var a=e.children,t=Object(ne.a)(e,["children"]);return r.a.createElement("button",Object.assign({className:"custom-button"},t),a)}),ie=function(){return r.a.createElement("div",{className:"cart-dropdown"},r.a.createElement("div",{className:"cart-items"}),r.a.createElement(re,null,"GO TO CHECKOUT"))},le=Object(c.b)(function(e){return{currentUser:e.user.currentUser}})(function(e){var a=e.handleSignOut,t=e.currentUser,i=Object(n.useState)(!0),l=Object(Z.a)(i,2),c=l[0],s=l[1];return console.log(t),r.a.createElement("div",{className:"header"},r.a.createElement(o.b,{className:"logo-container",to:"/"},r.a.createElement("img",{alt:"",src:"http://larexir.ro/wp-content/themes/larexir/images/logo.png",className:"logo"})),r.a.createElement("div",{className:"options"},null!==t?r.a.createElement("div",{className:"option",onClick:a},"DECONECTARE"):r.a.createElement(o.b,{className:"option",to:"/signin"},"CONECTARE"),null!==t?r.a.createElement(o.b,{className:"option",to:"/contfirma/1"},"Firma:",t.idFirma.denumire):null,r.a.createElement(K.Provider,{value:{hidden:c,toggleHidden:function(){return s(!c)}}},r.a.createElement("div",{className:"option"},r.a.createElement(te,null)))),c?null:r.a.createElement(ie,null))}),oe=t(40),ce=t(10),se=t.n(ce),de=t(17),ue=(t(147),t(148),function(e){var a=e.handleChange,t=e.label,n=Object(ne.a)(e,["handleChange","label"]);return r.a.createElement("div",{className:"group"},t?r.a.createElement("label",{className:"form-input-label"},t):null,r.a.createElement("input",Object.assign({className:"form-input",onChange:a},n)))}),me=t(116),pe=t.n(me),fe=Object({NODE_ENV:"production",PUBLIC_URL:"/PredaMarius/larexirWeb"}).API_URL||"http://5.189.183.44:1338",he=new pe.a(fe),ve=function(e){return{type:"SET_CURRENT_USER",payload:e}},Ee=function(e){return{type:"DELIVERY_ADDRESSES",payload:e}},ge=function(e){function a(e){var t;return Object(L.a)(this,a),(t=Object(F.a)(this,Object(U.a)(a).call(this,e))).handleSubmit=function(){var e=Object(de.a)(se.a.mark(function e(a){var n,r,i,l,o,c,s;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=t.state,r=n.email,i=n.password,l=t.props.handleSignIn,e.prev=3,t.setState({loading:!0}),e.next=7,he.login(r,i);case 7:return o=e.sent,V(o),H(o.user),t.props.setCurrentUser(o.user),l(),c={idFirma:o.user.idFirma.id},e.next=15,he.getEntries("adresalivrares",c);case 15:s=e.sent,console.log(o.user.idFirma.id),J(B(s)),t.props.setCurrentUserDeliveryAddresses(s),t.setState({loading:!1}),t.props.history.push("/"),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(3),t.setState({loading:!1}),t.setState({open:!0,mesaj:e.t0.message});case 27:case"end":return e.stop()}},e,null,[[3,23]])}));return function(a){return e.apply(this,arguments)}}(),t.redirectUser=function(e){return t.props.history.push(e)},t.isFormEmpty=function(e){var a=e.email,t=e.password;return!a||!t},t.handleChange=function(e){var a=e.target,n=a.value,r=a.name;t.setState(Object(oe.a)({},r,n))},t.state={email:"",password:"",open:!1,mesaj:"",loading:!1},t}return Object(_.a)(a,e),Object(D.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"sign-in"},r.a.createElement("h2",null,"Conecteaza-te la contul tau"),r.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},r.a.createElement(ue,{label:"Email",name:"email",type:"email",value:this.state.email,onChange:this.handleChange,required:!0}),r.a.createElement(ue,{label:"Parola",name:"password",type:"password",value:this.state.password,onChange:this.handleChange,required:!0}),r.a.createElement(re,{type:"submit"},"Autentificare")))}}]),a}(r.a.Component),be=Object(c.b)(null,function(e){return{setCurrentUser:function(a){return e(ve(a))},setCurrentUserDeliveryAddresses:function(a){return e(Ee(a))}}})(Object(z.g)(ge)),Ce=(t(175),t(176),t(177),Object(z.g)(function(e){var a=e.title,t=e.imageUrl,n=e.size,i=e.history,l=e.linkUrl,o=e.match;return r.a.createElement("div",{className:"".concat(n," menu-item"),onClick:function(){return i.push("".concat(o.url).concat(l))}},r.a.createElement("div",{className:"background-image",style:{backgroundImage:"url(".concat(t,")")}}),r.a.createElement("div",{className:"content"},r.a.createElement("h1",{className:"title"},a.toUpperCase()),r.a.createElement("span",{className:"subtitle"},"COMENZI")))})),Oe=function(e){function a(){var e;return Object(L.a)(this,a),(e=Object(F.a)(this,Object(U.a)(a).call(this))).state={sections:[{title:"jaluzele verticale",imageUrl:"http://larexir.ro/wp-content/uploads/2015/12/jal_vert.png",size:"medium",id:1,linkUrl:"jaluzeleverticale"},{title:"rolete panza",imageUrl:"http://larexir.ro/wp-content/uploads/2015/12/rolete_textile.png",size:"medium",id:2,linkUrl:"roletepanza"},{title:"rulouri exterioare",imageUrl:"http://larexir.ro/wp-content/uploads/2015/12/rulou_suprapus.png",size:"medium",id:3,linkUrl:"rulouriexterioare"},{title:"usi de garaj",imageUrl:"http://larexir.ro/wp-content/uploads/2015/12/usi_garaj.png",size:"medium",id:4,linkUrl:"usigaraj"},{title:"plase insecte",imageUrl:"http://larexir.ro/_grafic/produse/plase/plase_rulou_01.png",size:"medium",id:5,linkUrl:"plaseinsecte"},{title:"jaluzele orizontale",imageUrl:"http://larexir.ro/wp-content/uploads/2015/12/jaluzele_orizontale.png",size:"medium",id:6,linkUrl:"jaluzeleorizontale"}]},e}return Object(_.a)(a,e),Object(D.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"directory-menu"},this.state.sections.map(function(e){var a=e.id,t=Object(ne.a)(e,["id"]);return r.a.createElement(Ce,Object.assign({key:a},t))}))}}]),a}(r.a.Component),Ne=function(){return r.a.createElement("div",{className:"homepage"},r.a.createElement(Oe,null))},xe=(t(178),t(0)),Se=t(196),we=t(198),ye=t(68),je=t(117),Re=t(202),Ae=t(84),Pe=t(203),Me=t(204),Te=t(92),ke=t(201),$e=(t(179),t(200)),Ie=t(63),Le=t.n(Ie),De=function(e){return{type:"SET_COMANDA",payload:e}},Fe=function(e){return{type:"SET_REPER",payload:e}},Ue=function(e){return{type:"SET_OPEN_EDIT_COMANDA",payload:e}},_e=function(e){return{type:"SET_OPEN_EDIT_REPER",payload:e}},ze=function(e){return{type:"SET_OPEN_REPERE",payload:e}},Ve=function(e){function a(e){var t;return Object(L.a)(this,a),(t=Object(F.a)(this,Object(U.a)(a).call(this,e))).onChangeAdresaLivrare=function(e){var a=t.props,n=a.setComanda,r=a.comanda;console.log(e.id);var i=null===e?"":e.value;n(Object(v.a)({},r,Object(oe.a)({},"adresaLivrare",i)))},t.onChange=function(e){var a=t.props,n=a.setComanda,r=a.comanda,i=e.target.name,l=e.target.value;n(Object(v.a)({},r,Object(oe.a)({},i,l)))},t.closeModal=function(){(0,t.props.setOpenEditComanda)({open:!1,title:"",add:!0})},t.fields={text:"adresa",value:"adresa"},t.discount=t.props.currentUser.idFirma.discountJV,t}return Object(_.a)(a,e),Object(D.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(Le.a,{isOpen:this.props.openEditComanda.open,shouldCloseOnOverlayClick:!1,ariaHideApp:!1,style:{content:{width:"400px",height:"600px"}}},r.a.createElement("div",null,r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,this.props.openEditComanda.title)),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"e-float-input e-control-wrapper"},r.a.createElement("input",{name:"id",value:this.props.comanda.id,disabled:!0}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"},"Numar comanda"))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"e-float-input e-control-wrapper"},r.a.createElement("input",{name:"dataComanda",value:this.props.comanda.dataComanda,disabled:!0}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"},"Data comanda")))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("div",{className:"e-float-input e-control-wrapper"},r.a.createElement("input",{name:"clientClient",autoFocus:!0,value:this.props.comanda.clientClient,onChange:this.onChange}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"}," Client final")))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement($e.a,{id:"adresaLivrare",ref:function(a){e.adresaLivrareComboBox=a},dataSource:this.props.deliveryAddresses,change:this.onChangeAdresaLivrare,fields:this.fields,placeholder:"Adresa de livrare",popupHeight:"300px",floatLabelType:"Always",value:this.props.comanda.adresaLivrare,autofill:!0}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("div",{className:"e-float-input e-control-wrapper"},r.a.createElement("textarea",{name:"observatii",text:this.props.comanda.observatii,onChange:this.onChange}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"}," Observatii")))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-4"},r.a.createElement("div",{className:"e-float-input e-control-wrapper"},r.a.createElement("input",{type:"number",name:"valoareCatalog",value:this.props.comanda.valoareCatalog,disabled:!0}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"}," Valoare catalog"))),r.a.createElement("div",{className:"form-group col-md-4"},r.a.createElement("div",{className:"e-float-input e-control-wrapper"},r.a.createElement("input",{name:"prDiscount",value:this.props.comanda.prDiscount,disabled:!0,defaultValue:this.discount}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"}," Procent discount"))),r.a.createElement("div",{className:"form-group col-md-4"},r.a.createElement("div",{className:"e-float-input e-control-wrapper"},r.a.createElement("input",{name:"prDiscount",value:this.props.comanda.valoareComanda,disabled:!0}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"}," Valoare comanda")))),r.a.createElement("div",{className:"form-row alinieredreapta"},r.a.createElement("div",{className:"form-group col-md-4"},r.a.createElement("div",{className:"e-float-input e-control-wrapper alinieredreapta"},r.a.createElement("input",{name:"valoareClientFinal",value:this.props.comanda.valoareClientFinal}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"}," Valoare client final")))),r.a.createElement("div",{className:"modal-buttons"},r.a.createElement(re,{onClick:this.props.openEditComanda.add?this.props.handleAdaugaComanda:this.props.handleModificaComanda},"Salveaza"),r.a.createElement(re,{onClick:this.closeModal},"Abandon"))))}}]),a}(r.a.Component),Je=Object(c.b)(function(e){return{currentUser:e.user.currentUser,deliveryAddresses:e.user.deliveryAddresses,comanda:e.comanda.comanda,openEditComanda:e.comanda.openEditComanda}},function(e){return{setComanda:function(a){return e(De(a))},setOpenEditComanda:function(a){return e(Ue(a))}}})(Ve),qe=(t(188),t(189),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(a){case 0:return(e/1e3).toFixed(2);default:return"L"===t?(116*e*(a>1500?a:1500)*6/10/1e6).toFixed(2):(e*(a>1500?a:1500)/1e6).toFixed(2)}}),Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(!0){case e<=800:return 800;case e>800&&e<=900:return(e/100).toFixed(0);case e>900&&e<=1200:return 100*((e-100)/100).toFixed(0);case e>1200&&e<=2e3:return 100*((e-200)/100).toFixed(0);case e>2e3:return 100*((e-300)/100).toFixed(0);default:return 0}},He=function(){return(((arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)*(arguments.length>3&&void 0!==arguments[3]?arguments[3]:0))*(arguments.length>4?arguments[4]:void 0)).toFixed(2)},Be=function(e){function a(e){var t;Object(L.a)(this,a),(t=Object(F.a)(this,Object(U.a)(a).call(this,e))).onChangeMaterial=function(){var e=Object(de.a)(se.a.mark(function e(a){var n,r,i,l,o,c;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),r=t.props,i=r.setReper,l=r.reper,"material","denumireMaterial",o=null,c="",a.itemData&&(o=a.value,c=a.itemData.denumire),e.next=9,i(Object(v.a)({},l,(n={},Object(oe.a)(n,"material",o),Object(oe.a)(n,"denumireMaterial",c),n)));case 9:return e.next=11,t.calculPretCatalog();case 11:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.onChangeDeschidere=function(){var e=Object(de.a)(se.a.mark(function e(a){var n,r,i,l;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,r=n.setReper,i=n.reper,"deschidere",l=null===a?0:a.value,e.next=5,r(Object(v.a)({},i,Object(oe.a)({},"deschidere",l)));case 5:return e.next=7,t.calculPretCatalog();case 7:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.onChange=function(){var e=Object(de.a)(se.a.mark(function e(a){var n,r,i,l,o;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,r=n.setReper,i=n.reper,n.pretConsole,n.materiale,l=a.target.name,o=a.target.value,e.next=5,r(Object(v.a)({},i,Object(oe.a)({},l,o)));case 5:if("inaltime"!==l){e.next=12;break}return e.next=8,t.calculLungimeSnur();case 8:return e.next=10,t.calculPretCatalog();case 10:e.next=14;break;case 12:return e.next=14,t.calculPretCatalog();case 14:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.calculLungimeSnur=Object(de.a)(se.a.mark(function e(){var a,n,r;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.props,n=a.setReper,r=a.reper,console.log("declansare blur"),n(Object(v.a)({},r,{lungimeSnur:Ge(r.inaltime)}));case 3:case"end":return e.stop()}},e)})),t.calculPretCatalog=Object(de.a)(se.a.mark(function e(){var a,n,r,i,l,o;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.props,n=a.reper,r=a.setReper,i=a.pretConsole,l=a.materiale,o=l.filter(function(e){return e.key==n.material})[0]?l.filter(function(e){return e.key==n.material})[0].pret:0,console.log(qe(n.lungime,n.inaltime,n.deschidere),o,n.console,i,n.buc),r(Object(v.a)({},n,{pretCatalog:He(qe(n.lungime,n.inaltime,n.deschidere),o,n.console,i,n.buc)}));case 4:case"end":return e.stop()}},e)})),t.closeModal=function(){(0,t.props.setOpenEditReper)({open:!1,title:"",add:!0})};t.props.reper;return t.fieldsMaterial={text:"denumire",value:"key"},t.fieldsDeschidere={text:"denumire",value:"value"},t.deschidere=[{denumire:"T1",value:"1"},{denumire:"T2",value:"2"},{denumire:"T3",value:"3"},{denumire:"T4",value:"4"},{denumire:"Lamele",value:"L"},{denumire:"Dubla deschidere",value:"DA"}],t}return Object(_.a)(a,e),Object(D.a)(a,[{key:"render",value:function(){var e=this,a=this.props.reper;return r.a.createElement(Le.a,{isOpen:this.props.openEditReper.open,shouldCloseOnOverlayClick:!1,ariaHideApp:!1,style:{content:{width:"400px",height:"800px"}}},r.a.createElement("div",null,r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,this.props.openEditReper.title)),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("div",{className:"e-float-input e-control-wrapper"},r.a.createElement("input",{name:"nrCrt",autoFocus:!0,value:this.props.reper.nrCrt,onChange:this.onChange}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"},"Nr. Crt")))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"e-float-input e-control-wrapper"},r.a.createElement("input",{name:"lungime",type:"number",value:this.props.reper.lungime,onChange:this.onChange}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"},"Lungime"))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"e-float-input e-control-wrapper"},r.a.createElement("input",{name:"inaltime",type:"number",value:this.props.reper.inaltime,onChange:this.onChange}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"},"Inaltime")))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement($e.a,{id:"deschidere",ref:function(a){e.deschidereComboBox=a},dataSource:this.deschidere,change:this.onChangeDeschidere,fields:this.fieldsDeschidere,placeholder:"Tip deschidere",popupHeight:"300px",floatLabelType:"Always",value:this.props.reper.deschidere,autofill:!0,allowCustom:!1})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"e-float-input e-control-wrapper"},r.a.createElement("input",{name:"lungimeSnur",type:"number",value:this.props.reper.lungimeSnur,onChange:this.onChange}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"},"Lungime snur actionare")))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("div",{className:"e-float-input e-control-wrapper"},r.a.createElement("input",{name:"codMaterial",value:this.props.reper.codMaterial,onChange:this.onChange}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"}," Cod culoare")))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement($e.a,{id:"material",ref:function(a){e.materialComboBox=a},dataSource:this.props.materiale,change:this.onChangeMaterial,fields:this.fieldsMaterial,placeholder:"Material",popupHeight:"300px",floatLabelType:"Always",value:this.props.reper.material,autofill:!0,allowCustom:!1}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"e-float-input e-control-wrapper"},r.a.createElement("input",{name:"mp",type:"number",value:qe(a.lungime,a.inaltime,a.deschidere),disabled:!0}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"}," MP"))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"e-float-input e-control-wrapper"},r.a.createElement("input",{name:"console",type:"number",value:this.props.reper.console,onChange:this.onChange}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"}," Console (buc) ")))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"e-float-input e-control-wrapper"},r.a.createElement("input",{name:"pretCatalog",type:"number",value:this.props.reper.pretCatalog,disabled:!0}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"}," Pret "))),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("div",{className:"e-float-input e-control-wrapper"},r.a.createElement("input",{name:"buc",type:"number",value:this.props.reper.buc,onChange:this.onChange,onBlur:this.calculPretCatalog}),r.a.createElement("span",{className:"e-float-line"}),r.a.createElement("label",{className:"e-float-text e-label-top"}," Cantitate ")))),r.a.createElement("div",{className:"modal-buttons"},r.a.createElement(re,{onClick:this.props.openEditReper.add?this.props.adaugaReper:this.props.modificaReper},"Salveaza"),r.a.createElement(re,{onClick:this.closeModal},"Abandon"))))}}]),a}(r.a.Component),Ze=Object(c.b)(function(e){return{materiale:e.comanda.materiale,reper:e.comanda.reper,openEditReper:e.comanda.openEditReper,pretConsole:e.comanda.pretConsole}},function(e){return{setReper:function(a){return e(Fe(a))},setOpenEditReper:function(a){return e(_e(a))}}})(Be),Ke=function(e){return new Date(1*Date.parse(e)).toLocaleString("ro-RO")},Qe=function(e){function a(e){var t;return Object(L.a)(this,a),(t=Object(F.a)(this,Object(U.a)(a).call(this,e))).clickHandlerMaster=function(){var e=Object(de.a)(se.a.mark(function e(a){var n,r,i,l,o,c,s;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,r=n.comanda,i=n.setReper,l=n.setOpenEditReper,o=n.reper,"Adauga"===a.item.properties.id&&(i({}),l({open:!0,title:"Adauga reper nou",add:!0})),"Modifica"===a.item.properties.id&&r.id&&l({open:!0,title:"Modifica reper",add:!1}),"Sterge"!==a.item.properties.id){e.next=15;break}if(!t.masterGrid){e.next=15;break}if(c=t.masterGrid.getSelectedRowIndexes()[0],!t.masterGrid.getSelectedRowIndexes().length){e.next=13;break}return e.next=9,he.deleteEntry("comandarepers",o.id).catch(function(e){return alert("Eroare. Verificati conexiunea la internet. Error:"&e)});case 9:s=e.sent,JSON.stringify(s)===JSON.stringify({})&&t.masterGrid.dataSource.splice(c,1),e.next=14;break;case 13:alert("Nu ati selectat nici un reper!");case 14:t.masterGrid.refresh();case 15:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.adaugaReper=Object(de.a)(se.a.mark(function e(){var a,n,r,i,l,o,c,s;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.props,n=a.comenzi,r=a.comanda,i=a.reper,l=a.setReper,o=a.setOpenEditReper,!t.masterGrid){e.next=6;break}return e.next=4,he.createEntry("comandarepers",{idComanda:r.id,nrCrt:Number(i.nrCrt?i.nrCrt:0),tipSubprodus:0,lungime:Number(i.lungime?i.lungime:0),inaltime:Number(i.inaltime?i.inaltime:0),deschidere:i.deschidere?i.deschidere:"",material:i.material?i.material:0,codMaterial:i.codMaterial?i.codMaterial:"",lungimeSnur:Number(i.lungimeSnur?i.lungimeSnur:0),console:Number(i.console?i.console:0),buc:Number(i.buc?i.buc:0),mp:qe(i.lungime,i.inaltime,i.deschidere),pretCatalog:Number(i.pretCatalog?i.pretCatalog:0),tipProdus:"JV",denumireProdus:"JALUZELE VERTICALE",denumireSubProdus:"JALUZELE VERTICALE",denumireMaterial:i.denumireMaterial?i.denumireMaterial:""}).catch(function(e){return alert("Eroare. Verificati conexiunea la internet. Error:"&e)});case 4:c=e.sent;try{s=n.findIndex(function(e){return e.id==c.idComanda.id}),n[s].comandarepers.unshift(c),l(c),o({open:!1,title:"",add:!0}),t.masterGrid.refresh()}catch(d){alert("Eroare. Verificati conexiunea la internet. Error:"&d)}case 6:case"end":return e.stop()}},e)})),t.modificaReper=Object(de.a)(se.a.mark(function e(){var a,n,r,i,l,o,c,s;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.props,n=a.reper,r=a.setReper,i=a.setOpenEditReper,a.repere,l=a.comenzi,!t.masterGrid){e.next=6;break}return e.next=4,he.updateEntry("comandarepers",n.id,{lungime:Number(n.lungime?n.lungime:0),inaltime:Number(n.inaltime?n.inaltime:0),deschidere:n.deschidere?n.deschidere:"",material:n.material?n.material:0,codMaterial:n.codMaterial?n.codMaterial:"",lungimeSnur:Number(n.lungimeSnur?n.lungimeSnur:0),console:Number(n.console?n.console:0),buc:Number(n.buc?n.buc:0),mp:qe(n.lungime,n.inaltime,n.deschidere),pretCatalog:Number(n.pretCatalog?n.pretCatalog:0),tipProdus:"JV",denumireProdus:"JALUZELE VERTICALE",denumireSubProdus:"JALUZELE VERTICALE",denumireMaterial:n.denumireMaterial?n.denumireMaterial:""}).catch(function(e){return alert("Eroare. Verificati conexiunea la internet. Error:"&e)});case 4:o=e.sent;try{c=l.findIndex(function(e){return e.id==o.idComanda.id}),s=l[c].comandarepers.findIndex(function(e){return e.id==o.id}),l[c].comandarepers.splice(s,1,o),r(o),i({open:!1,title:"",add:!0}),t.masterGrid.refresh()}catch(d){alert("Eroare. Verificati conexiunea la internet. Error:"&d)}case 6:case"end":return e.stop()}},e)})),t.closeVizualizareRepere=function(e){return t.props.setOpenRepere(!1)},t.commands=[{type:"Edit",buttonOption:{iconCss:" e-icons e-edit"}}],t.toolbarOptions=[{text:"Adauga",tooltipText:"Adauga reper noua",prefixIcon:"e-add",id:"Adauga"},{text:"Modifica",tooltipText:"Modifica reperul selectat",prefixIcon:"e-edit",id:"Modifica"},{text:"Sterge",tooltipText:"Sterge reperul selectat",prefixIcon:"e-delete",id:"Sterge"}],t.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog",template:t.dialogTemplate,allowEditOnDblClick:!1},t}return Object(_.a)(a,e),Object(D.a)(a,[{key:"actionComplete",value:function(e){"beginEdit"!==e.requestType&&"add"!==e.requestType||xe.c.isDevice&&(e.dialog.height=window.innerHeight-90+"px",e.dialog.dataBind())}},{key:"rowselect",value:function(e){(0,this.props.setReper)(e.data)}},{key:"rowdeselect",value:function(){(0,this.props.resetareReper)()}},{key:"render",value:function(){var e=this;return r.a.createElement(Le.a,{isOpen:this.props.openRepere,shouldCloseOnOverlayClick:!1,ariaHideApp:!1},r.a.createElement("div",{className:"control-pane"},r.a.createElement("div",{className:"antet"},r.a.createElement("div",{className:"stanga"},r.a.createElement("div",{className:"identificareComanda"},r.a.createElement("div",{className:"itemAntet"},"Numar comanda:",this.props.comanda.id),r.a.createElement("div",{className:"itemAntet"},"Data comanda:",Ke(this.props.comanda.dataComanda)),r.a.createElement("div",{className:"itemAntet"},"Stadiu:",this.props.comanda.stadiu)),r.a.createElement("div",{className:"informatiiComanda"},r.a.createElement("div",{className:"itemAntet"},"Client:",this.props.comanda.clientClient),r.a.createElement("div",{className:"itemAntet"},"Observatii:",this.props.comanda.observatii))),r.a.createElement("div",{className:"dreapta"},r.a.createElement("div",{className:"btnClose"},r.a.createElement("button",{onClick:this.closeVizualizareRepere},"X")))),r.a.createElement(Ze,{adaugaReper:this.adaugaReper,modificaReper:this.modificaReper}),r.a.createElement("div",{className:"control-section"},r.a.createElement(Se.a,{dataSource:this.props.comanda.id?this.props.comenzi.filter(function(a){return a.id==e.props.comanda.id.toString()})[0].comandarepers:[],rowSelected:this.rowselect.bind(this),allowPaging:!0,toolbar:this.toolbarOptions,editSettings:this.editSettings,actionComplete:this.actionComplete.bind(this),toolbarClick:this.clickHandlerMaster,ref:function(a){return e.masterGrid=a},allowSorting:!0,allowResizing:!0,showColumnMenu:!0,rowDeselected:this.rowdeselect.bind(this),selectedRowIndex:-1},r.a.createElement(we.b,null,r.a.createElement(we.a,{field:"id",headerText:"Comanda",width:"0",isPrimaryKey:!0}),r.a.createElement(we.a,{field:"nrCrt",headerText:"Nr.",width:"50"}),r.a.createElement(we.a,{field:"lungime",headerText:"Lungime(Garnisa)",width:"100"}),r.a.createElement(we.a,{field:"inaltime",headerText:"Inaltime",width:"100"}),r.a.createElement(we.a,{field:"deschidere",headerText:"T",width:"75"}),r.a.createElement(we.a,{field:"denumireMaterial",headerText:"Material",width:"175"}),r.a.createElement(we.a,{field:"codMaterial",headerText:"Cod culoare",width:"120"}),r.a.createElement(we.a,{field:"lungimeSnur",headerText:"Act.",width:"75"}),r.a.createElement(we.a,{field:"mp",headerText:"MP",type:"number",format:"N2",width:"50"}),r.a.createElement(we.a,{field:"console",headerText:"Console",width:"100"}),r.a.createElement(we.a,{field:"buc",headerText:"Cant.",width:"120"}),r.a.createElement(we.a,{field:"pretCatalog",headerText:"Pret",width:"75"})),r.a.createElement(ye.c,{services:[je.a,Re.a,Ae.a,Pe.a,Me.a,Te.a,ke.a]})))))}}]),a}(r.a.Component),Ye=Object(c.b)(function(e){return{comenzi:e.comanda.comenzi,currentUser:e.user.currentUser,comanda:e.comanda.comanda,reper:e.comanda.reper,openRepere:e.comanda.openRepere}},function(e){return{setOpenEditReper:function(a){return e(_e(a))},setOpenRepere:function(a){return e(ze(a))},adaugaReper:function(a){return e(function(e){return{type:"ADAUGA_REPER",payload:e}}(a))},setReper:function(a){return e(Fe(a))},resetareReper:function(){return e({type:"RESETARE_REPER"})}}})(Qe),We=t(61),Xe=t(55);function ea(){var e=Object(We.a)(["\nmutation CreateComandareper(\n        $idComanda:ID!,\n        $nrCrt:Int,\n        $tipSubprodus:Int!,\n        $lungime:Int,\n        $inaltime:Int,\n        $deschidere:String,\n        $material:Int,\n        $codMaterial:String,\n        $lungimeSnur:Int,\n        $console:Int,\n        $buc:Int,\n        $mp:Float,\n        $pretCatalog:Float,\n        $tipProdus:String!,\n        $denumireProdus:String,\n        $denumireSubProdus:String,\n        $denumireMaterial:String)\n{\n        createComandareper(input:{data:\n                { \n                        idComanda:$idComanda,\n                        nrCrt:$nrCrt,\n                        tipSubprodus:$tipSubprodus,\n                        lungime:$lungime,\n                        inaltime: $inaltime,\n                        deschidere:$deschidere,\n                        material:$material,\n                        codMaterial:$codMaterial,\n                        lungimeSnur:$lungimeSnur,\n                        console:$console,\n                        buc:$buc,\n                        mp:$mp,\n                        pretCatalog:$pretCatalog,\n                        tipProdus:$tipProdus,\n                        denumireProdus:$denumireProdus,\n                        denumireSubProdus:$denumireSubProdus,\n                        denumireMaterial:$denumireMaterial\n                }}) \n            {comandareper{               \n                id\n                created_at\n                updated_at\n                idComanda{id}\n                nrCrt\n                tipSubprodus\n                lungime\n                inaltime\n                deschidere\n                material\n                codMaterial\n                lungimeSnur\n                console\n                buc\n                mp\n                pretCatalog\n                tipProdus\n                denumireProdus\n                denumireSubProdus\n                denumireMaterial\n            }}\n        }\n"]);return ea=function(){return e},e}function aa(){var e=Object(We.a)(["\nmutation UpdateComanda(\n$id:ID!,\n$clientClient: String!, \n$valoareCatalog:Float!, \n$discount:Int!, \n$valoareComanda:Float!, \n$valoareClientFinal:Float!, \n$observatii:String!, \n$adresaLivrare:String!,\n$stadiu:String!, \n$idFirma:ID!, \n$tipProdus:String!){\nupdateComanda( input:{ where:{id:$id} data:\n{\nclientClient:$clientClient, \nvaloareCatalog:$valoareCatalog, \ndiscount: $discount, \nvaloareComanda:$valoareComanda, \nvaloareClientFinal:$valoareClientFinal, \nobservatii:$observatii, \nadresaLivrare:$adresaLivrare,\nstadiu: $stadiu, \nidFirma:$idFirma, \ntipProdus:$tipProdus}}) \n{comanda{id\ncreated_at\nupdated_at\ndataComanda\nclientClient\nvaloareCatalog\ndiscount\nvaloareComanda\nvaloareClientFinal\nobservatii\nadresaLivrare\nstadiu\ntipProdus\nidFirma{id}\n}}\n}   \n"]);return aa=function(){return e},e}function ta(){var e=Object(We.a)(["\nmutation CreateComanda(\n        $clientClient: String!, \n        $valoareCatalog:Float!, \n        $discount:Int!, \n        $valoareComanda:Float!, \n        $valoareClientFinal:Float!, \n        $observatii:String!, \n        $adresaLivrare:String!,\n        $stadiu:String!, \n        $idFirma:ID!, \n        $tipProdus:String!){\n        createComanda(input:{data:\n                { clientClient:  $clientClient, \n                valoareCatalog:$valoareCatalog, \n                discount: $discount, \n                valoareComanda:$valoareComanda, \n                valoareClientFinal:$valoareClientFinal, \n                observatii:$observatii, \n                adresaLivrare:$adresaLivrare,\n                stadiu: $stadiu, \n                idFirma:$idFirma, \n                tipProdus:$tipProdus}}) \n            {comanda{id\n            created_at\n            updated_at\n            dataComanda\n            clientClient\n            valoareCatalog\n            discount\n            valoareComanda\n            valoareClientFinal\n            observatii\n            adresaLivrare\n            stadiu\n            tipProdus\n            idFirma{id}\n            }}\n        }   \n"]);return ta=function(){return e},e}function na(){var e=Object(We.a)(['\nquery optionals{\n        optionals(limit:1 ,where:{ tipProdus:"JV" denumire:"Console"}) {\n           pret\n        } \n}   \n']);return na=function(){return e},e}function ra(){var e=Object(We.a)(["\nquery materials($tipProdus:String) {\n        materials(limit:10000 ,where:{ tipProdus:$tipProdus}) {\n           key,\n           denumire,\n           pret,\n           atentionare,\n           tipMaterial,\n           activ\n        } \n}   \n"]);return ra=function(){return e},e}function ia(){var e=Object(We.a)(["\nquery comandas($idFirma: Int, $tipProdus:String) {\n        comandas(limit:1000 ,where:{ idFirma:$idFirma, tipProdus:$tipProdus}) {\n            id,\n            created_at,\n            updated_at,\n            dataComanda,\n            clientClient,\n            valoareCatalog,\n            discount,\n            valoareComanda,\n            valoareClientFinal,\n            observatii,\n            adresaLivrare,\n            stadiu,\n            tipProdus,\n            comandarepers{\n                id,\n                idComanda{id},\n                nrCrt,\n                tipSubprodus,\n                lungime,\n                inaltime,\n                deschidere,\n                material,\n                codMaterial,\n                lungimeSnur,\n                console,\n                buc,\n                mp,\n                pretCatalog,\n                pretCuDiscount,\n                pretClientFinal,\n                observatii,\n                tipProdus,\n                denumireProdus,\n                denumireSubProdus,\n                denumireMaterial,\n                }\n        } \n}   \n"]);return ia=function(){return e},e}var la=Object(Xe.a)(ia()),oa=Object(Xe.a)(ra()),ca=Object(Xe.a)(na()),sa=(Object(Xe.a)(ta()),Object(Xe.a)(aa()),Object(Xe.a)(ea()),function(){var e=Object(de.a)(se.a.mark(function e(a,t){var n;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}if(!t.getSelectedRowIndexes().length){e.next=8;break}return e.next=4,he.deleteEntry("comandas",a).catch(function(e){return alert("Eroare. Verificati conexiunea la internet. Error:"&e)});case 4:n=e.sent,JSON.stringify(n)===JSON.stringify({})&&t.dataSource.splice(t.getSelectedRowIndexes()[0],1),e.next=9;break;case 8:alert("Nu ati selectat nici o comanda!");case 9:t.refresh();case 10:case"end":return e.stop()}},e)}));return function(a,t){return e.apply(this,arguments)}}()),da=function(){var e=Object(de.a)(se.a.mark(function e(a,t,n,r,i,l,o){var c;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=16;break}return e.next=3,he.createEntry("comandas",{idFirma:t.idFirma.id,tipProdus:a,clientClient:n.clientClient?n.clientClient:"Client necompletat",valoareCatalog:0,discount:t.idFirma.discountJV,valoareComanda:0,valoareClientFinal:0,observatii:n.observatii?n.observatii:"",adresaLivrare:n.adresaLivrare,stadiu:"NETRANSMISA"}).catch(function(e){return alert("Eroare. Verificati conexiunea la internet. Error:"&e)});case 3:return c=e.sent,e.prev=4,e.next=7,i.unshift(c);case 7:return e.next=9,l(c);case 9:o({open:!1,title:"",add:!0}),r.refresh(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),alert("Eroare. Verificati conexiunea la internet. Error:"&e.t0);case 16:case"end":return e.stop()}},e,null,[[4,13]])}));return function(a,t,n,r,i,l,o){return e.apply(this,arguments)}}(),ua=function(){var e=Object(de.a)(se.a.mark(function e(a,t,n,r,i,l){var o,c;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return e.next=3,he.updateEntry("comandas",t.id,{clientClient:t.clientClient?t.clientClient:"Client necompletat",valoareCatalog:t.valoareCatalog?t.valoareCatalog:0,discount:a.idFirma.discountJV,valoareComanda:t.valoareComanda?t.valoareComanda:0,valoareClientFinal:t.valoareClientFinal?t.valoareClientFinal:0,observatii:t.observatii?t.observatii:"",adresaLivrare:t.adresaLivrare?t.adresaLivrare:"",stadiu:t.stadiu?t.stadiu:"NETRANSMISA"}).catch(function(e){return alert("Eroare. Verificati conexiunea la internet. Error:"&e)});case 3:o=e.sent;try{c=n.findIndex(function(e){return e.id==o.id}),n[c]=o,i(o),l({open:!1,title:"",add:!0}),r.refresh()}catch(s){alert("Eroare. Verificati conexiunea la internet. Error:"&s)}case 5:case"end":return e.stop()}},e)}));return function(a,t,n,r,i,l){return e.apply(this,arguments)}}(),ma=function(e){function a(e){var t;return Object(L.a)(this,a),(t=Object(F.a)(this,Object(U.a)(a).call(this,e))).handleToolbarClick=function(){var e=Object(de.a)(se.a.mark(function e(a){var n,r,i,l;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.props,r=n.comanda,i=n.setComanda,l=n.setOpenEditComanda,"Adauga"===a.item.properties.id&&(i({}),l({open:!0,title:"Adauga comanda noua",add:!0})),"Modifica"===a.item.properties.id&&r.id?l({open:!0,title:"Modifica comanda",add:!1}):"Modifica"===a.item.properties.id&&alert("Nu ati selectat nici o comanda!"),"Sterge"===a.item.properties.id&&sa(r.id,t.masterGrid);case 4:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.handleAdaugaComanda=Object(de.a)(se.a.mark(function e(){var a,n,r,i,l,o;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.props,n=a.comanda,r=a.currentUser,i=a.setComanda,l=a.setOpenEditComanda,o=a.comenzi,da(t.tipProdus,r,n,t.masterGrid,o,i,l);case 2:case"end":return e.stop()}},e)})),t.handleModificaComanda=Object(de.a)(se.a.mark(function e(){var a,n,r,i,l,o;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.props,n=a.comanda,r=a.currentUser,i=a.setComanda,l=a.setOpenEditComanda,o=a.comenzi,ua(r,n,o,t.masterGrid,i,l);case 2:case"end":return e.stop()}},e)})),t.statusTemplate=function(e){return r.a.createElement("div",{id:"stadiu",className:"statustemp"},r.a.createElement("span",{className:"statustxt"},e.stadiu))},t.dataTemplate=function(e){return r.a.createElement("div",null,r.a.createElement("span",null,Ke(e.dataComanda)))},t.vizualizareRepere=function(e){e.stopPropagation(),t.props.setOpenRepere(!0)},t.butttonVizualizareRepere=function(){return r.a.createElement("button",{className:"butonContinut",onClick:t.vizualizareRepere},"Continut")},t.commands=[{type:"Edit",buttonOption:{iconCss:" e-icons e-edit"}}],t.toolbarOptions=[{text:"Adauga",tooltipText:"Adauga comanda noua",prefixIcon:"e-add",id:"Adauga"},{text:"Modifica",tooltipText:"Modifica comanda selectata",prefixIcon:"e-edit",id:"Modifica"},{text:"Sterge",tooltipText:"Sterge comanda selectata",prefixIcon:"e-delete",id:"Sterge"}],t.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog",template:t.dialogTemplate,allowEditOnDblClick:!1},t.tipProdus="JV",t}return Object(_.a)(a,e),Object(D.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.currentUser,t=e.loadComenzi,n=e.loadMateriale,r=e.loadPretConsole;!function(e,a,t){I.query({query:la,variables:{idFirma:a,tipProdus:e}}).then(function(e){return t(e.data.comandas)}).catch(function(e){return alert("Eroare. Verificati conexiunea la internet. Error:"&e)})}(this.tipProdus,a.idFirma.id,t),function(e,a){I.query({query:oa,variables:{tipProdus:e}}).then(function(e){return a(e.data.materials)}).catch(function(e){return alert("Eroare. Verificati conexiunea la internet. Error:"&e)})}(this.tipProdus,n),function(e){I.query({query:ca}).then(function(a){return e(a.data.optionals[0].pret)}).catch(function(e){return alert("Eroare. Verificati conexiunea la internet. Error:"&e)})}(r)}},{key:"actionComplete",value:function(e){"beginEdit"!==e.requestType&&"add"!==e.requestType||xe.c.isDevice&&(e.dialog.height=window.innerHeight-90+"px",e.dialog.dataBind())}},{key:"onQueryCellInfo",value:function(e){"stadiu"===e.column.field&&("TRANSMISA"===e.cell.textContent&&(e.cell.querySelector(".statustxt").classList.add("e-activecolor"),e.cell.querySelector(".statustemp").classList.add("e-activecolor")),"NETRANSMISA"===e.cell.textContent&&(e.cell.querySelector(".statustxt").classList.add("e-inactivecolor"),e.cell.querySelector(".statustemp").classList.add("e-inactivecolor")))}},{key:"rowselect",value:function(e){(0,this.props.setComanda)(e.data)}},{key:"rowdeselect",value:function(e){var a=this.props.resetareComanda;"Continut"===e.target.outerText?e.cancel=!0:a()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"control-pane"},r.a.createElement("h1",{className:"title"},"COMENZI JALUZELE VERTICALE"),r.a.createElement(Je,{handleAdaugaComanda:this.handleAdaugaComanda,handleModificaComanda:this.handleModificaComanda}),r.a.createElement(Ye,null),r.a.createElement("div",{className:"control-section"},r.a.createElement(Se.a,{dataSource:this.props.comenzi,rowSelected:this.rowselect.bind(this),allowPaging:!0,toolbar:this.toolbarOptions,editSettings:this.editSettings,actionComplete:this.actionComplete.bind(this),toolbarClick:this.handleToolbarClick,ref:function(a){return e.masterGrid=a},allowSorting:!0,queryCellInfo:this.onQueryCellInfo.bind(this),allowResizing:!0,showColumnMenu:!0,rowDeselected:this.rowdeselect.bind(this),selectedRowIndex:-1},r.a.createElement(we.b,null,r.a.createElement(we.a,{field:"id",headerText:"Comanda",width:"120",isPrimaryKey:!0}),r.a.createElement(we.a,{field:"dataComanda",headerText:"Data",template:this.dataTemplate,width:"120"}),r.a.createElement(we.a,{headerText:"Continut",width:"100",template:this.butttonVizualizareRepere}),r.a.createElement(we.a,{field:"stadiu",headerText:"Stadiu",template:this.statusTemplate,width:"80"}),r.a.createElement(we.a,{field:"clientClient",headerText:"Client",width:"200"}),r.a.createElement(we.a,{field:"valoareComanda",headerText:"Val. comanda",width:"100"}),r.a.createElement(we.a,{field:"observatii",headerText:"Observatii",width:"100"})),r.a.createElement(ye.c,{services:[je.a,Re.a,Ae.a,Pe.a,Me.a,Te.a,ke.a]}))))}}]),a}(r.a.Component),pa=Object(c.b)(function(e){return{currentUser:e.user.currentUser,comenzi:e.comanda.comenzi,comanda:e.comanda.comanda,pretConsole:e.comanda.pretConsole,openRepere:e.comanda.openRepere}},function(e){return{loadComenzi:function(a){return e(function(e){return{type:"LOAD_COMENZI",payload:e}}(a))},loadMateriale:function(a){return e(function(e){return{type:"LOAD_MATERIALE",payload:e}}(a))},loadPretConsole:function(a){return e(function(e){return{type:"LOAD_PRETCONSOLE",payload:e}}(a))},setComanda:function(a){return e(De(a))},setOpenEditComanda:function(a){return e(Ue(a))},adaugaComanda:function(a){return e(function(e){return{type:"ADAUGA_COMANDA",payload:e}}(a))},resetareComanda:function(){return e({type:"RESETARE_COMANDA"})},setOpenRepere:function(a){return e(ze(a))}}})(ma),fa=function(e){function a(){var e,t;Object(L.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object(F.a)(this,(e=Object(U.a)(a)).call.apply(e,[this].concat(r)))).handleSignIn=function(){t.props.setCurrentUser(G())},t.handleSignOut=function(){q(),t.props.setCurrentUser(null),t.props.setCurrentUserDeliveryAddresses(null)},t}return Object(_.a)(a,e),Object(D.a)(a,[{key:"componentDidMount",value:function(){this.props.setCurrentUser(G()),this.props.setCurrentUserDeliveryAddresses(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"adreselivrare";return localStorage&&localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):null}())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(le,{handleSignOut:this.handleSignOut}),r.a.createElement(z.d,null,r.a.createElement(z.b,{exact:!0,path:"/",component:Ne}),r.a.createElement(z.b,{exact:!0,path:"/signin",render:function(){return e.props.currentUser?r.a.createElement(z.a,{to:"/"}):r.a.createElement(be,{handleSignIn:e.handleSignIn})}}),r.a.createElement(z.b,{path:"/jaluzeleverticale",component:pa})))}}]),a}(r.a.Component),ha=Object(c.b)(null,function(e){return{setCurrentUser:function(a){return e(ve(a))},setCurrentUserDeliveryAddresses:function(a){return e(Ee(a))}}})(fa);l.a.render(r.a.createElement(c.a,{store:y},r.a.createElement(R.a,{client:I},r.a.createElement(o.a,null,r.a.createElement(s.a,{persistor:j},r.a.createElement(ha,null))))),document.getElementById("root"))}},[[125,1,2]]]);
//# sourceMappingURL=main.506a61fe.chunk.js.map